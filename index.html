<!DOCTYPE html>
<html lang="en-US" class="js scheme_default js_active vc_desktop vc_transform vc_transform">
<script type="text/javascript" id="www-widgetapi-script" src="js/www-widgetapi.js" async></script>
<script type="text/javascript" async src="js/annalytics.js"></script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- logo -->
  <link rel="icon" href="images/logo.png">
  <title>Rabbit on Xrpl</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/detail.css">
  <link rel="stylesheet" href="css/style_2.css">
  <link rel="manifest" href="manifest.json">
  <script src="js/firebase-app.js"></script>
  <script src="js/firebase-auth.js"></script>
  <script src="js/firebase-firestore.js"></script>

  <meta name="theme-color" content="#000000">
  <style>
    a {
      font-family: "Voltaire" !important;
    }

    .nav {
      position: absolute;
      z-index: 10;
      top: 30px;
      right: 40px;
    }
  </style>
  <!-- template home -->
  <style type="text/css">
    img.wp-smiley,
    img.emoji {
      display: inline !important;
      border: none !important;
      box-shadow: none !important;
      height: 1em !important;
      width: 1em !important;
      margin: 0 0.07em !important;
      vertical-align: -0.1em !important;
      background: none !important;
      padding: 0 !important;
    }
  </style>
  <link property="stylesheet" rel="stylesheet" id="hoverex-font-google_fonts-css" href="css/font-muli.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="tp-open-sans-css" href="css/font-open-sans.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="tp-raleway-css" href="css/font-raleway.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="tp-droid-serif-css" href="css/font-droid-seri.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="vc_extensions_cqbundle_adminicon-css" href="css/admin_icon.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="wp-block-library-css" href="css/style.min.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_addons-css" href="css/trx_addons.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="fontello-icons-css" href="css/fontello-embedded.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="contact-form-7-css" href="css/style_1.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="essential-grid-plugin-settings-css" href="css/setting.css"
    type="text/css" media="all">

  <link property="stylesheet" rel="stylesheet" id="tp-fontello-css" href="css/fontello.css" type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_addons-icons-css" href="css/trx_addons_icons-embedded.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="swiperslider-css" href="css/swiper.min.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="magnific-popup-css" href="css/magnific-popup.min.css" type="text/css"
    media="all">

  <link property="stylesheet" rel="stylesheet" id="trx_addons-animation-css" href="css/trx_addons-animation.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_demo_icons-css" href="css/trx_demo_icons.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_demo_icons_animation-css" href="css/animation.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_demo_panels-css" href="css/trx_demo_panels.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="gdpr-framework-privacy-tools-css" href="css/privacy-tools.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="give-styles-css" href="css/give.css" type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="js_composer_front-css" href="css/js_composer.min.css" type="text/css"
    media="all">

  <link property="stylesheet" rel="stylesheet" id="hoverex-colors-css" href="css/colors.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="mediaelement-css" href="css/mediaelementplayer-legacy.min.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="wp-mediaelement-css" href="css/wp-mediaelement.min.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="trx_addons-responsive-css" href="css/trx_addons-responsive.css"
    type="text/css" media="all">
  <link property="stylesheet" rel="stylesheet" id="hoverex-responsive-css" href="css/responsive.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="animate-css-css" href="css/animate.min.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="tooltipster-css" href="css/tooltipster.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="vc_entypo-css" href="css/vc_entypo.min.css" type="text/css"
    media="all">
  <link property="stylesheet" rel="stylesheet" id="vc_tta_style-css" href="css/js_composer_tta.min.css" type="text/css"
    media="all">
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/jquery-migrate.min.js"></script>
  <style type="text/css">
    .recentcomments a {
      display: inline !important;
      padding: 0 !important;
      margin: 0 !important;
    }
  </style>
  <style type="text/css" data-type="vc_shortcodes-custom-css">
    .vc_custom_1520937106648 {
      background-image: url(images/header_home2.jpg) !important;
      background-position: center !important;
      background-repeat: no-repeat !important;
      background-size: cover !important;
    }

    .vc_custom_1520937125035 {
      background-size: cover !important;
    }

    .vc_custom_1520937133118 {
      background-image: url(images/features_bg_mob.jpg) !important;
      background-position: center !important;
      background-repeat: no-repeat !important;
      background-size: cover !important;
    }

    .vc_custom_1520937146501 {
      background-image: url(images/about2_bg_1.png) !important;
      background-position: center !important;
      background-repeat: no-repeat !important;
      background-size: cover !important;
    }

    .vc_custom_1520937154406 {
      background-color: #050510 !important;
    }

    .vc_custom_1520937172939 {
      background-image: url(images/roadmap_bg2.png) !important;
      background-position: top left !important;
      background-repeat: no-repeat !important;
      background-size: cover !important;
    }

    .vc_custom_1520590419722 {
      padding-left: 45px !important;
    }
  </style>
  <noscript>
    <style type="text/css">
      .wpb_animate_when_almost_visible {
        opacity: 1;
      }
    </style>
  </noscript>
  <style type="text/css" id="trx_addons-inline-styles-inline-css">
    .hoverex_inline_877657410 {
      background-image: url(images/header_bg.jpg);
    }

    .vc_custom_1520416391280 {
      margin-bottom: 15px !important;
    }
  </style>
  <style type="text/css">
    .trx_demo_inline_2116964728 {
      color: #ffffff !important;
      border-color: #ffaa5f !important;
      background-color: #ffaa5f !important;
    }

    .trx_demo_inline_1726610451:hover {
      color: #ffffff !important;
      border-color: #cc884c !important;
      background-color: #cc884c !important;
    }
  </style>
</head>

<body class="preloading">
  <div class="load">
    <img src="images/loader.gif">
  </div>
  <div id="world">
    <!-- <div class="header"> -->
    <div class="down-box"></div>
    <div>
      <div id="logo">
        <a href><img style="width: 68px;border-radius: 50%;" src="images/logo.png" alt="logo"> </a>
      </div>
      <!-- <ul class="nav" style="height: unset">
        <li class="nav-item">
          <a class="active" aria-current="page" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a href="">Airdrop</a>
        </li>
        <li class="nav-item">
          <a href="https://t.me/Rabbit_OnSui">Telegram</a>
        </li>
        <li class="nav-item"><a href="https://x.com/Rabbit_OnSui">X(Twitter)</a></li>

      </ul> -->
      <!-- <div class="container">
        <div id="loading" class="loading" style="display: none;">Loading...</div>
        <div class="row">
          <div class="col">
            <table class="table table-striped table-bordered">
              <thead class="table-primary">
                <tr>
                  <th>User</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody id="userData">
              </tbody>
            </table>
            <button id="loadMore" class="btn btn-primary">Load More</button>
          </div>
        </div>
      </div> -->

      <ul class="nav-mob" style="display: none;">
        <li class="nav-item">
          <a class="active" aria-current="page" href="/">Home</a>
        </li>
        <li class="nav-item"><a href="/cross-chain/">Airdrop</a></li>
        <li class="nav-item">
          <a href="https://t.me/Rabbit_OnSui">Telegram</a>
        </li>
        <li class="nav-item"><a href="https://x.com/Rabbit_OnSui">X(Twitter)</a></li>

      </ul>
      <!-- </div> -->
      <div style="font-family: 'Voltaire'!important;    display: flex !important
      ;
          justify-content: center;
          align-items: center;" id="gameoverInstructions">Start <img src="./images/xrp.png"
          style="width: 62px; margin-left: 3px;" alt="" srcset=""></div>
      <div id="dist">
        <div class="label">distance</div>
        <div id="distValue">0</div>
      </div>
      <div id="instructions-center">
        <a id="scrolldown">
          <div style="width: 140px;" class="goto-menu-btn btn"><a href target="_blank" rel="noopener noreferrer">Buy
              Now</a></div>
        </a>
      </div>
      <div id="instructions">
        Click to jump -<span class="lightInstructions">
          <a href="https://t.me/Rabbit_OnSui">Telegram -</a> <a href="https://x.com/Rabbit_OnSui">X(Twitter)</a></span>
      </div>
    </div>
  </div>
  <div
    class="page-template-default page page-id-34 wp-custom-logo body_tag scheme_default blog_mode_page body_style_wide is_single sidebar_hide expand_content remove_margins trx_addons_present header_type_custom header_style_header-custom-747 header_position_over menu_style_top wpb-js-composer js-comp-ver-5.7 vc_responsive desktop_layout">

    <!-- /.body_wrap -->

    <!-- <script type="text/javascript" src="/home/js/trx_addons.js"></script> -->
    <script type="text/javascript">
      /* <![CDATA[ */
      var TRX_DEMO_STORAGE = {
        ajax_url: "http:\/\/hoverex.themerex.net\/wp-admin\/admin-ajax.php",
        ajax_nonce: "71d2493a82",
        site_url: "http:\/\/hoverex.themerex.net",
        user_logged_in: "0",
        msg_ajax_error: "Invalid server response! Try again later.",
        tabs_delay: "5000",
      };
      /* ]]> */
    </script>

    <script type="text/javascript" src="js/trx_demo_panels.js"></script>
    <script type="text/javascript" src="js/babel-polyfill.js"></script>

    <script type="text/javascript" src="js/mediaelement-and-player.min.js"></script>
    <script type="text/javascript" src="js/mediaelement-migrate.min.js"></script>
    <script type="text/javascript">
      /* <![CDATA[ */
      var _wpmejsSettings = {
        pluginPath: "\/wp-includes\/js\/mediaelement\/",
        classPrefix: "mejs-",
        stretching: "responsive",
      };
      /* ]]> */
    </script>
    <script type="text/javascript" src="js/wp-mediaelement.min.js"></script>
    <script type="text/javascript" src="js/wp-embed.min.js"></script>
    <script type="text/javascript" src="js/js_composer_front.min.js"></script>
    <script type="text/javascript" src="js/waypoints.min.js"></script>
    <script type="text/javascript" src="js/chart.min.js"></script>
    <script type="text/javascript" src="js/jquery.tooltipster.min.js"></script>
    <script type="text/javascript" src="js/script.min.js"></script>
    <script type="text/javascript" src="js/vc-accordion.min.js"></script>
    <script type="text/javascript" src="js/vc-tta-autoplay.min.js"></script>
    <script type="text/javascript" src="js/core.min.js"></script>
    <script type="text/javascript" src="js/widget.min.js"></script>
    <!-- <script type="text/javascript" src="/home/js/tabs.min.js"></script> -->
    <script type="text/javascript" src="js/effect.min.js"></script>
    <script type="text/javascript" src="js/effect-fade.min.js"></script>
    <script type="text/javascript">
      /* <![CDATA[ */
      var mc4wp_forms_config = [];
      /* ]]> */
    </script>
    <script type="text/javascript" src="js/forms-api.min.js"></script>
  </div>

  <script src="js/three.js"></script>
  <script src="js/TweenMax.min.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/index.js"></script>
  <script>
    $("#scrolldown").click(function () {
      $('html,body').animate({
        scrollTop: $("#post-34").offset().top
      }, 750);
    });
  </script>
  <script type="text/javascript">
    $(window).on('load', function (e) {
      $('body').removeClass('preloading');
      $('.load').delay(1000).fadeOut('fast');
    });
  </script>
  <script src="js/web3.min.js" crossorigin="anonymous"></script>
  <script src="js/jquery_1.js" crossorigin="anonymous"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD55ZnU_GX7L5varAuprnWugy_FDXM1FhQ",
      authDomain: "data-sui.firebaseapp.com",
      projectId: "data-sui",
      storageBucket: "data-sui.appspot.com",
      messagingSenderId: "15867478435",
      appId: "1:15867478435:web:9d2b205c67e828c8385a16",
      measurementId: "G-9HKQLMBCKN",
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    } else {
      firebase.app();
    }

    const db = firebase.firestore();
    let currentPage = 0;
    const pageSize = 5;

    async function getAllUsersAndScores() {
      document.getElementById('loading').style.display = 'block';

      try {
        const querySnapshot = await db.collection("Database")
          .orderBy('Score')
          .offset(currentPage * pageSize)
          .limit(pageSize)
          .get();

        let tableBody = document.getElementById('userData');


        if (currentPage === 0) {
          tableBody.innerHTML = '';
        }

        querySnapshot.forEach((doc) => {
          let row = tableBody.insertRow();
          let cell1 = row.insertCell(0);
          let cell2 = row.insertCell(1);


          const userId = doc.id;
          const displayUserId = `${userId.substring(0, 4)}...${userId.substring(userId.length - 4)}`;

          cell1.textContent = displayUserId;
          cell2.textContent = doc.data().Score;
        });

        document.getElementById('loading').style.display = 'none';


        if (querySnapshot.size < pageSize) {
          document.getElementById('loadMore').style.display = 'none';
        }
      } catch (error) {
        console.error("Error getting documents: ", error);
        document.getElementById('loading').textContent = 'Err.';
      }
    }

    document.getElementById('loadMore').addEventListener('click', () => {
      currentPage++;
      getAllUsersAndScores();
    });

    document.addEventListener('DOMContentLoaded', () => {
      getAllUsersAndScores();
    });
  </script>
  <!-- MAKE SURE TO ADD THIS -->
  <script src="js/telegram-web-app.js"></script>
  <script src="js/main.js" type="module"></script>
  <script>

    window.onload = function () {
      if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.ready();
        console.log("Telegram WebApp User:", window.Telegram.WebApp.initDataUnsafe?.user);
      }
    }
  </script>

  <script>
    try {
      if (window.Telegram && window.Telegram.WebApp) {
        if (window.Telegram.WebApp.isVersionAtLeast('8.0')) {
          window.Telegram.WebApp.requestFullscreen();
        }
      }
    } catch (e) {
      if (e.message === 'WebAppMethodUnsupported') {
        console.warn('Fullscreen mode is not supported in this Telegram version');
      } else {
        console.error(e);
      }
    }
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.Telegram && window.Telegram.WebApp) {
        // Expand webapp to maximum available height
        window.Telegram.WebApp.expand();

        // Request fullscreen if supported (version >= 8.0)
        if (window.Telegram.WebApp.isVersionAtLeast('8.0')) {
          window.Telegram.WebApp.requestFullscreen();
        }

        // Enable closing confirmation to prevent accidental exits
        window.Telegram.WebApp.enableClosingConfirmation();

        // Disable vertical swipes to prevent interference with app navigation
        window.Telegram.WebApp.disableVerticalSwipes();
      }
    });
  </script>

  <script>
    const db = firebase.firestore();

    function showUserProfile() {
      const profilePanel = document.createElement('div');
      profilePanel.className = 'profile-panel';

      const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user || null;

      const getUserStats = async () => {
        if (!tgUser?.id) return null;
        try {
          const userDoc = await db.collection('users').doc(String(tgUser.id)).get();
          return userDoc.exists ? userDoc.data() : null;
        } catch (error) {
          console.error("Error fetching user stats:", error);
          return null;
        }
      };

      getUserStats().then(stats => {
        profilePanel.innerHTML = `
          <div class="profile-content">
            <div class="profile-header">
              <h2>Player Profile</h2>
              <button class="close-profile">&times;</button>
            </div>
            
            <div class="user-info">
              <div class="avatar">
                ${tgUser?.photo_url ?
            `<img src="${tgUser.photo_url}" alt="avatar"/>` :
            `<div class="avatar-placeholder">${tgUser?.first_name?.[0] || 'U'}</div>`
          }
              </div>
              <div class="user-details">
                <p class="username">${tgUser?.first_name || 'Web User'}</p>
                <p class="user-id">${tgUser?.id ? `ID: ${tgUser.id}` : 'No ID'}</p>
              </div>
            </div>

            <div class="game-stats">
              <div class="stat-item">
                <span class="stat-label">High Score</span>
                <span class="stat-value">${stats?.highScore ?? 'No data'}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Games Played</span>
                <span class="stat-value">${stats?.gamesPlayed ?? 'No data'}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Current Level</span>
                <span class="stat-value">${level || 'No data'}</span>
              </div>
            </div>
          </div>
        `;

        document.body.appendChild(profilePanel);

        const styles = `
          .profile-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            z-index: 1000;
            min-width: 300px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(220, 95, 69, 0.3);
            font-family: 'Voltaire', sans-serif;
          }
          .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #dc5f45;
          }
          .close-profile {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #dc5f45;
          }
          .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
          }
          .avatar img, .avatar-placeholder {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
          }
          .avatar-placeholder {
            background: #dc5f45;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
          }
          .game-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
          }
          .stat-item {
            background: rgba(220, 95, 69, 0.1);
            padding: 10px;
            border-radius: 8px;
          }
          .stat-label {
            display: block;
            color: #666;
            font-size: 14px;
          }
          .stat-value {
            display: block;
            color: #dc5f45;
            font-size: 20px;
            font-weight: bold;
          }
          .player-tag {
            cursor: pointer;
          }
          .player-tag:hover {
            transform: scale(1.05);
            transition: transform 0.2s ease;
          }
        `;

        const styleSheet = document.createElement('style');
        styleSheet.textContent = styles;
        document.head.appendChild(styleSheet);

        document.querySelector('.close-profile').addEventListener('click', () => {
          profilePanel.remove();
        });
      });
    }

    document.querySelector('.player-tag').addEventListener('click', showUserProfile);
  </script>

  <script>
    document.removeEventListener("mousedown", handleMouseDown);

    const playerTag = document.querySelector('.player-tag');
    if (playerTag) {
      playerTag.addEventListener('click', (e) => {
        e.stopPropagation();
        showUserProfile();
      });
    }

    document.addEventListener("mousedown", (e) => {
      if (!e.target.closest('.profile-panel') && !e.target.closest('.player-tag')) {
        handleMouseDown(e);
      }
    });
  </script>

</body>

</html>